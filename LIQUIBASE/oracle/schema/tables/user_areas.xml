<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:spatial="http://www.liquibase.org/xml/ns/dbchangelog-ext/liquibase-spatial"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd   http://www.liquibase.org/xml/ns/dbchangelog-ext/liquibase-spatial
      http://lonnyj.github.com/liquibase-spatial/liquibase-spatial.xsd">


    <changeSet author="padhyad (generated)" id="1461666113417-23">
        <createSequence cacheSize="20" cycle="false" incrementBy="1" maxValue="9999999999999999999999999999" minValue="1" ordered="false" sequenceName="user_areas_gid_seq" startValue="1"/>
    </changeSet>

    <changeSet author="padhyad (generated)" id="1461666113417-46">
        <preConditions>
            <spatial:spatialSupported/>
        </preConditions>
        <createTable tableName="user_areas">
            <column name="gid" valueComputed="user_areas_gid_seq.NEXTVAL" type="NUMBER(20, 0)">
                <constraints nullable="false"/>
            </column>
            <column name="user_name" type="NVARCHAR2(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="NVARCHAR2(255)">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="NVARCHAR2(20)"/>
            <column name="type" type="NVARCHAR2(255)"/>
            <column name="area_desc" type="NCLOB"/>
            <column name="geom" type="SDO_GEOMETRY">
                <constraints nullable="false"/>
            </column>
            <column name="enabled_on" type="date"/>
            <column name="created_on" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date"/>
            <column name="end_date" type="date"/>
            <column name="dataset_name" type="NVARCHAR2(255)">
                <constraints nullable="false"/>
            </column>
            <column name="enabled" type="NCHAR(1)"/>
        </createTable>
    </changeSet>

    <changeSet author="padhyad (generated)" id="1461666113497-31">
        <spatial:createSpatialIndex tableName="user_areas" indexName="user_areas_spatial_idx" geometryType="Multipolygon" srid="4326">
            <column name="geom" />
        </spatial:createSpatialIndex>
    </changeSet>

    <changeSet author="padhyad" id="1439890755706-50">
        <addUniqueConstraint columnNames="dataset_name" constraintName="user_areas_dataset_key" tableName="user_areas"/>
    </changeSet>

    <changeSet author="padhyad (generated)" id="1461666113417-69">
        <addPrimaryKey columnNames="gid" constraintName="user_areas_pkey" tableName="user_areas"/>
    </changeSet>

    <changeSet author="padhyad (generated)" id="1461666113417-79">
        <addForeignKeyConstraint baseColumnNames="user_area_id" baseTableName="area_status" constraintName="fk_user_area" deferrable="true" initiallyDeferred="true" onDelete="RESTRICT" onUpdate="RESTRICT" referencedColumnNames="gid" referencedTableName="user_areas"/>
    </changeSet>

</databaseChangeLog>
