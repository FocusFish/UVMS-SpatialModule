sql.findAreasIdByLocation = SELECT gid FROM spatial.{tableName} where st_intersects(geom, st_geomfromtext(CAST(:wktPoint as text), :crs))

sql.closestArea = WITH prox_query AS (SELECT CAST( id AS text), st_distance_spheroid(geom, st_geomfromtext(CAST(:wkt as text), :defaultCrs), 'SPHEROID["WGS 84",6378137,298.257223563]') /:unit AS distance FROM spatial.{tableName} ORDER BY geom <-> 'SRID=4326;POINT(-7.14925 45.11557)'\\:\\:geometry limit 10) SELECT * FROM prox_query ORDER BY distance LIMIT 1
sql.closestAreaWithTransform = WITH prox_query AS (SELECT CAST( id AS text), st_distance_spheroid(geom, st_transform(st_geomfromtext(CAST(:wkt as text), :otherCrs), :defaultCrs), 'SPHEROID["WGS 84",6378137,298.257223563]') /:unit AS distance FROM spatial.{tableName} ORDER BY geom <-> 'SRID=4326;POINT(-7.14925 45.11557)'\\:\\:geometry LIMIT 10) SELECT * FROM prox_query ORDER BY distance limit 1
